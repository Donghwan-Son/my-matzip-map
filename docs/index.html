<!DOCTYPE html>
<html>
  <head>
    <title>맛집 지도</title>
    <meta charset="utf-8" />
    <style>
      #map {
        height: 100vh;
      }
      #search-box {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 5;
        background: white;
        padding: 8px;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDAiQg0kEN0suogq4jL2ptUsaCvrNBRZys&libraries=places"></script>
    <script>
      function initMap() {
        const map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: 37.5665, lng: 126.9780 },
          zoom: 12,
        });

        const locations = [
          {name: "중산센트럴아이파크107", address: : "경기 고양시 일산동구 중산로 70, 일산센트럴 아이파크 아파트 107동 605호", lat: 37.6784316, lng: 126.7827785, category: "카페", rating: 4.5, link: "https://naver.me/xSFaE8jg"},
          {name: "호평파라곤3", address: : "경기도 남양주시 호평동 724 호평파라곤 아파트 테라스03동 503호", lat: 37.6701637, lng: 127.2489227, category: "한식", rating: 4.5, link: "https://naver.me/IItceslH"},
          {name: "공덕파크자이102", address: : "서울시 마포구 백범로 152 공덕파크자이 102동 2201호", lat: 37.5451941, lng: 126.9471063, category: "일식", rating: 4.5, link: "https://naver.me/55rmUIZD"},
          {name: "북가좌DMC래미안303", address: : "서울시 서대문구 수색로 100 DMC래미안e편한세상 303동 303호", lat: 37.5743477, lng: 126.9120565, category: "카페", rating: 4.5, link: "https://naver.me/xhzCxM66"},
          {name: "판교원마을한림풀에버919", address: : "경기도 성남시 분당구 서판교로 29 판교원마을한림풀에버아파트 919동 1303호", lat: 37.3900119, lng: 127.0962875, category: "한식", rating: 4.5, link: "https://naver.me/FBeXm0BP"},
          {name: "자양이튼타워리버5차B", address: : "서울 광진구 자양동 능동로4길 40, 이튼타워리버5차 B동 1503호 ", lat: 37.5321852, lng: 127.0690312, category: "일식", rating: 4.5, link: "https://naver.me/5vcHGMMR"},
          {name: "운중산운마을804", address: : " 경기도 성남시 분당구 산운로 98 산운8단지 804동
  1304호", lat: 37.3924592, lng: 127.0719891, category: "카페", rating: 4.5, link: "https://m.place.naver.com/share?id=18619821&tabsPath=%2Fphoto&appMode=detail"},
          {name: "잠실아시아선수촌1", address: : "서울 송파구 잠실동 86, 아시아선수촌아파트 1동 1704호", lat: 37.508045, lng: 127.0766464, category: "한식", rating: 4.5, link: "https://naver.me/FPn5jwzb"},
          {name: "대치미도207", address: : "서울 강남구 삼성로 150, 대치미도아파트 207동 1003호", lat: 37.4933928, lng: 127.0673501, category: "일식", rating: 4.5, link: "https://naver.me/xSFaE8jg"},
          {name: "상도래미안307", address: : "서울시 동작구 상도로53길 8", lat: 37.499352, lng: 126.9547334, category: "카페", rating: 4.5, link: "https://naver.me/IItceslH"},
          {name: "반포래미안퍼스티지125", address: : "서울 서초구 반포대로 275 반포래미안퍼스티지 125동 2704호", lat: 37.5030575, lng: 126.9996699, category: "한식", rating: 4.5, link: "https://naver.me/55rmUIZD"},
          {name: "둔촌올림픽파크포레온120", address: : "강동구 올림픽파크포레온, 120동 1503호", lat: 37.5408397, lng: 127.1405618, category: "일식", rating: 4.5, link: "https://naver.me/xhzCxM66"},
          {name: "서초롯데캐슬클래식109", address: : "서울 서초구 서운로 197, 서초롯데캐슬클래식아파트 109동 302호", lat: 37.5004672, lng: 127.0220201, category: "카페", rating: 4.5, link: "https://naver.me/FBeXm0BP"},
          {name: "덕풍삼부르네상스101", address: : "경기도 하남시 덕풍북로140 삼부 르네상스 아파트 101동 1001호", lat: 37.5546322, lng: 127.2039842, category: "한식", rating: 4.5, link: "https://naver.me/5vcHGMMR"},
          {name: "다산효성해링턴타워102", address: : "경기도 남양주시 경춘로 377 다산효성해링턴타워 102동 3703호", lat: 37.605901, lng: 127.1559588, category: "일식", rating: 4.5, link: "https://m.place.naver.com/share?id=18619821&tabsPath=%2Fphoto&appMode=detail"},
          {name: "별내대원칸타빌2404", address: : "경기 남양주시 순화궁로 384, 남양주별내대원칸타빌 2404동 803호", lat: 37.6614684, lng: 127.1246887, category: "카페", rating: 4.5, link: "https://naver.me/FPn5jwzb"},
          {name: "삼성롯데프레미어107(2003)", address: : "서울 강남구 선릉로126길 22, 롯데캐슬프레미어아파트 107동 2003호", lat: 37.5151584, lng: 127.0451257, category: "한식", rating: 4.5, link: "https://naver.me/xSFaE8jg"},
          {name: "잠실엘스139", address: : "서울시 송파구 올림픽로 99 엘스 139동 3002호 ", lat: 37.5140688, lng: 127.0813814, category: "일식", rating: 4.5, link: "https://naver.me/IItceslH"},
          {name: "흑석한강현대110", address: : "서울시 동작구  현충로 151 한강현대 110동 906호", lat: 37.5066126, lng: 126.9702257, category: "카페", rating: 4.5, link: "https://naver.me/55rmUIZD"},
          {name: "사직광화문스페이스본105", address: : "서울시 종로구 사직로8길 4 광화문스페이스본 105동 411호", lat: 37.5743822, lng: 126.9688505, category: "한식", rating: 4.5, link: "https://naver.me/xhzCxM66"},
          {name: "남가좌DMC파크뷰자이119", address: : "서울시 서대문구 가재울미래로 2 DMC파크뷰자이 119동 1901호", lat: 37.57400810000001, lng: 126.9150231, category: "일식", rating: 4.5, link: "https://naver.me/FBeXm0BP"},
          {name: "성내신일유토빌101", address: : "강동구 양재대로81길 16, 101동 703호", lat: 37.52316039999999, lng: 127.1333624, category: "카페", rating: 4.5, link: "https://naver.me/5vcHGMMR"},
          {name: "성복힐스테이트312", address: : "경기 용인시 수지구 성복2로220, 힐스테이트3차 312동 504호 ", lat: 37.3211726, lng: 127.0635608, category: "한식", rating: 4.5, link: "https://m.place.naver.com/share?id=18619821&tabsPath=%2Fphoto&appMode=detail"},
          {name: "용산리첸시아103", address: : "서울시 용산구 백범로 341 리첸시아 용산 B단지 103동1105호", lat: 37.5380381, lng: 126.9675825, category: "일식", rating: 4.5, link: "https://naver.me/FPn5jwzb"},
          {name: "용산파크타워104", address: : "서울 용산구 서빙고로 67, 파크타워 104동 2403호", lat: 37.5242567, lng: 126.970731, category: "카페", rating: 4.5, link: "https://naver.me/xSFaE8jg"},
          {name: "정자타임브릿지B", address: : "경기 성남시 분당구 정자일로156번길 12 타임브릿지 B동 3006호", lat: 37.3639205, lng: 127.1072677, category: "한식", rating: 4.5, link: "https://naver.me/IItceslH"},
          {name: "옥수하이츠106", address: : "서울 성동구 한림말길 50, 옥수하이츠 106동 901호", lat: 37.54011759999999, lng: 127.0163862, category: "카페", rating: 4.5, link: "https://naver.me/55rmUIZD"},
          {name: "송도더샵하버뷰1302", address: : "인천시 연수구 아트센터대로 97번길 75, 송도더샵하버뷰13단지 1302동 3003호", lat: 37.3981874, lng: 126.6463552, category: "한식", rating: 4.5, link: "https://naver.me/FPn5jwzb"},
          {name: "판교봇들마을302", address: : "경기도 성남시 분당구 동판교로 225, 봇들마을3단지 302동 403호", lat: 37.4025825, lng: 127.1149918, category: "일식", rating: 4.5, link: "https://naver.me/FPn5jwzb"},
          {name: "용산파크타워102", address: : "서울 용산구 서빙고로 67, 파크타워 102동 2606호", lat: 37.5242567, lng: 126.970731, category: "카페", rating: 4.5, link: "https://naver.me/xSFaE8jg"},
          {name: "송도롯데캐슬캠퍼스타운103", address: : "인천시 연수구 송도과학로27번길55, 송도롯데캐슬캠퍼스타운 103동 3302호", lat: 37.3880544, lng: 126.6651321, category: "한식", rating: 4.5, link: "https://naver.me/IItceslH"},
          {name: "반포래미안원펜타스106", address: : "서울시 서초구 반포2동 래미안원펜타스 106동 803호", lat: 37.50377830000001, lng: 126.9936331, category: "일식", rating: 4.5, link: "https://naver.me/55rmUIZD"},
          {name: "방배이편한세상102", address: : "서울시 서초구 서초대로34길 34, 방배1차 이편한세상 102동 1404호", lat: 37.4877044, lng: 126.9989468, category: "카페", rating: 4.5, link: "https://naver.me/xhzCxM66"},
          {name: "보정포스홈타운1단지212", address: : "경기도 용인시 기흥구 용구대로2518번길 15, 신촌마을포스홈타운1단지 212동 1301호", lat: 37.3105106, lng: 127.1089422, category: "한식", rating: 4.5, link: "https://naver.me/FBeXm0BP"},
          {name: "삼성롯데프레미어107(1103)", address: : "서울 강남구 선릉로126길 22, 롯데캐슬프레미어 107동 1103호", lat: 37.5151584, lng: 127.0451257, category: "일식", rating: 4.5, link: "https://naver.me/5vcHGMMR"},
          {name: "송도자이하버뷰203", address: : "인천 연수구 컨벤시아대로130번길 32, 송도자이하버뷰 203동 2201호", lat: 37.39518839999999, lng: 126.643137, category: "카페", rating: 4.5, link: "https://m.place.naver.com/share?id=18619821&tabsPath=%2Fphoto&appMode=detail"},
          {name: "삼성금호어울림101", address: : "서울시 강남구 봉은사로111길 25,금호어울림아파트, 101동 305호(우)06082", lat: 37.5168667, lng: 127.0647706, category: "일식", rating: 4.5, link: "https://naver.me/FPn5jwzb"},
          {name: "반포래미안퍼스티지120", address: : "서울 서초구  반포대로 275, 래미안퍼스티지아파트
  120-801 ", lat: 37.5030575, lng: 126.9996699, category: "한식", rating: 4.5, link: "https://m.place.naver.com/share?id=18619821&tabsPath=%2Fphoto&appMode=detail"},
          {name: "망포그대가센트럴파크201", address: : "경기 수원시 영통구 영통로174번길 12, 그대가센트럴파크 201-1902", lat: 37.24215909999999, lng: 127.0561655, category: "카페", rating: 4.5, link: "https://naver.me/5vcHGMMR"},
          {name: "상도힐스테이트104", address: : "서울 동작구 상도로 346-1, 힐스테이트 상도 센트럴파크 104동 1503호", lat: 37.4957038, lng: 126.9504935, category: "일식", rating: 4.5, link: "https://naver.me/FBeXm0BP"},
          {name: "정자아이파크1406", address: : "경기도 성남시 분당구 백현로 100 정자아이파크 1406호", lat: 37.3762236, lng: 127.1103729, category: "한식", rating: 4.5, link: "https://naver.me/xhzCxM66"},
          {name: "사직광화문스페이스본106", address: : "서울시 종로구 경희궁길 57 광화문스페이스본 아파트 106동 802호", lat: 37.5735471, lng: 126.9677629, category: "카페", rating: 4.5, link: "https://naver.me/55rmUIZD"},
          {name: "방배현대멤피스102", address: : "서울특별시 서초구 방배로 239 현대멤피스 102동 502호", lat: 37.4942595, lng: 126.9889506, category: "일식", rating: 4.5, link: "https://naver.me/IItceslH"},
          {name: "역삼테헤란아이파크105", address: : "서울 강남구 테헤란로52길 16, 역삼테헤란 아이파크105동 1201호", lat: 37.5027133, lng: 127.0469331, category: "한식", rating: 4.5, link: "https://naver.me/xSFaE8jg"},
          {name: "별내우미린더퍼스트2", address: : "경기도 남양주시 별내3로 24, 우미린더퍼스트 4502동 1504호", lat: 37.6439891, lng: 127.1184186, category: "카페", rating: 4.5, link: "https://naver.me/FPn5jwzb"}
        ];

        const categoryIcons = {
          "한식": "http://maps.google.com/mapfiles/ms/icons/red-dot.png",
          "카페": "http://maps.google.com/mapfiles/ms/icons/blue-dot.png",
          "일식": "http://maps.google.com/mapfiles/ms/icons/green-dot.png"
        };

        const infowindow = new google.maps.InfoWindow();

        function getStars(rating) {
          const full = Math.floor(rating);
          const half = rating % 1 >= 0.5 ? 1 : 0;
          return "★".repeat(full) + (half ? "½" : "") + "☆".repeat(5 - full - half);
        }

        locations.forEach(loc => {
          const marker = new google.maps.Marker({
            position: { lat: loc.lat, lng: loc.lng },
            map: map,
            title: loc.name,
            icon: categoryIcons[loc.category] || null
          });

          const content = `
            <div>
              <strong>${loc.name}</strong><br/>
              별점: ${getStars(loc.rating)} (${loc.rating})<br/>
              주소: ${loc.address}<br/>
              <a href="${loc.link}" target="_blank">자세히 보기</a>
            </div>
          `;

          marker.addListener("click", () => {
            infowindow.setContent(content);
            infowindow.open(map, marker);
          });
        });

        const locationButton = document.createElement("button");
        locationButton.textContent = "현재 위치";
        locationButton.classList.add("custom-map-control-button");
        map.controls[google.maps.ControlPosition.TOP_RIGHT].push(locationButton);

        locationButton.addEventListener("click", () => {
          if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
              (position) => {
                const pos = {
                  lat: position.coords.latitude,
                  lng: position.coords.longitude,
                };
                map.setCenter(pos);
                new google.maps.Marker({
                  position: pos,
                  map: map,
                  title: "내 위치",
                });
              },
              () => {
                alert("위치 접근 권한이 필요합니다.");
              }
            );
          } else {
            alert("이 브라우저에서는 위치 기능이 지원되지 않습니다.");
          }
        });

        const input = document.getElementById("search-input");
        const searchBox = new google.maps.places.SearchBox(input);
        map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

        searchBox.addListener("places_changed", () => {
          const places = searchBox.getPlaces();
          if (places.length == 0) return;

          const bounds = new google.maps.LatLngBounds();
          places.forEach((place) => {
            if (!place.geometry || !place.geometry.location) return;

            map.setCenter(place.geometry.location);
            map.setZoom(15);
          });
        });
      }
    </script>
  </head>
  <body onload="initMap()">
    <div id="search-box">
      <input id="search-input" type="text" placeholder="장소 검색" style="width: 300px;" />
    </div>
    <div id="map"></div>
  </body>
</html>